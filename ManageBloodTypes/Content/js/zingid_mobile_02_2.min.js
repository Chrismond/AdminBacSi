!function(){var e="268px",n="hamburger-menu-m";function t(e,n){for(var t in e=document.createElementNS("http://www.w3.org/2000/svg",e),n)e.setAttributeNS(null,t.replace(/[A-Z]/g,(function(e,n,t,i){return"-"+e.toLowerCase()})),n[t]);return e}document.addEventListener("DOMContentLoaded",(function(){var i=document.querySelector(".zidbody .zid_sidemenu");if(i){var o=document.querySelector(".zid_header .zidlogo"),r=t("svg",{fill:"none",stroke:"#ffffff",id:n});r.setAttributeNS(null,"viewBox","0 0 24 24");var a=t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"});r.appendChild(a),o.prepend(r),r.addEventListener("click",(function(){var n=i.style.maxWidth===e;i.style.maxWidth=n?0:e}));var s=document.querySelectorAll(".zid_helpcentre .zid_sidemenu .zidmitem .subm a");if(s&&s.length)for(var c=0;c<s.length;c++){s[c].addEventListener("click",(function(){if(!(Math.max(document.documentElement.clientWidth,window.innerWidth||0)>768)){var e=document.querySelector(".zidbody .zid_sidemenu");e&&(e.style.maxWidth=0)}}))}var l=document.querySelector(".accuser_code_inner"),p=function(e){if(!e)return"";let n=e.toLowerCase();return n=n.replace(/á|à|ả|ạ|ã|ă|ắ|ằ|ẳ|ẵ|ặ|â|ấ|ầ|ẩ|ẫ|ậ/gi,"a"),n=n.replace(/é|è|ẻ|ẽ|ẹ|ê|ế|ề|ể|ễ|ệ/gi,"e"),n=n.replace(/i|í|ì|ỉ|ĩ|ị/gi,"i"),n=n.replace(/ó|ò|ỏ|õ|ọ|ô|ố|ồ|ổ|ỗ|ộ|ơ|ớ|ờ|ở|ỡ|ợ/gi,"o"),n=n.replace(/ú|ù|ủ|ũ|ụ|ư|ứ|ừ|ử|ữ|ự/gi,"u"),n=n.replace(/ý|ỳ|ỷ|ỹ|ỵ/gi,"y"),n=n.replace(/đ/gi,"d"),n=n.replace(/\s/gi,""),n}(l&&l.innerText||"").match(/^taikhoan\(zingid\)\:(.*)\|masotaikhoan\:(\d*)$/);if(p&&p.length&&p.length>=3){var d=p[1],u=p[2],h=document.createElement("DIV");h.setAttribute("class","accuser_code_inner_mobile");var $='<div class="zing-id-m"><span>Zing ID: </span><span class="text-bold-m">'+g(d)+'</span></div><div class="zing-number-m"><span>Mã số TK: </span><span class="text-bold-m">'+g(u)+"</span></div>";h.innerHTML=$;var f=document.querySelector(".accuser_code");f&&f.appendChild(h)}}function g(e){return String(e).replace(/[^\w. ]/gi,(function(e){return"&#"+e.charCodeAt(0)+";"}))}})),window.addEventListener("resize",(function(){try{if(Math.max(document.documentElement.clientWidth,window.innerWidth||0)<=768)return;var n=document.querySelector(".zidbody .zid_sidemenu");if(!n)return;n.style.maxWidth=e}catch(e){}})),window.addEventListener("click",(function(e){try{var t=e.target;if(Math.max(document.documentElement.clientWidth,window.innerWidth||0)>768)return;var i=document.querySelector(".zidbody .zid_sidemenu");if(!i)return;if(i.contains(t))return;if(t.id===n)return;if("path"===t.tagName&&t.parentNode&&t.parentNode.id===n)return;i.style.maxWidth=0}catch(e){}}))}(),jQuery.fn.inputFilter=function(e){return this.on("input keydown keyup mousedown mouseup select contextmenu drop",(function(){e(this.value)?(this.oldValue=this.value,this.oldSelectionStart=this.selectionStart,this.oldSelectionEnd=this.selectionEnd):this.hasOwnProperty("oldValue")?(this.value=this.oldValue,this.setSelectionRange(this.oldSelectionStart,this.oldSelectionEnd)):this.value=""}))},$(document).ready((function(){let e=!1,n=!1,t=!1,i=!1;const o=".login-channel-transfer__form",r="92140c0e46c54994812403f564787c14";let a="",s=!1;function c(){$(`${o} #recaptcha-input`).val(""),zm.getJSON(`https://captcha2.zing.vn/captcha2/gettoken?publicKey=${r}`,(function(e){$(`${o} #captcha-image`).attr("src",`https://captcha2.zing.vn/captcha2/getcaptcha?publicKey=${r}&token=${e.token}`),a=e.token}))}function l(e){return String(e).replace(/[^\w. ]/gi,(function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))}async function p(e="",n={}){return(await fetch(e,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded"},redirect:"follow",referrerPolicy:"no-referrer",body:$.param(n)})).json()}function d(e,n=!1,r="",a=""){if(e&&["phone","email"].includes(e)){if($(`${o} #resend-${e}-otp`).css("display","block"),$(`${o} #${e}-otp-sent-failed`).css("border-right","1px solid #ccc"),n)return r&&$(`${o} #${e}-otp-sent-failed .err-message`).text(r),$(`${o} #send-${e}-otp`).css("display","none"),$(`${o} #${e}-otp-sent-success`).css("display","none"),$(`${o} #${e}-otp-sent-failed`).css("display","flex"),$(`${o} #${e}-otp-timer`).css("display","none"),t?$(`${o} #email-otp-timer`).css("display","inline"):$(`${o} #email-otp-timer`).css("display","none"),i?$(`${o} #phone-otp-timer`).css("display","inline"):$(`${o} #phone-otp-timer`).css("display","none"),void(a&&-2==a&&"phone"===e&&($(`${o} #resend-phone-otp`).css("display","none"),$(`${o} #${e}-otp-sent-failed`).css("border-right","none")));$(`${o} #${e}-otp-sent-failed`).css("display","none"),$(`${o} #${e}-otp-sent-success`).css("display","flex"),$(`${o} #${e}-otp-timer`).css("display","inline")}}function u(n){if(t)return;var i=60;$(`${o} #email-otp-timer`).css("display","inline"),$(`${o} #resend-email-otp a`).css("opacity","0.6"),$(`${o} #resend-email-otp a`).css("cursor","not-allowed"),e=!1,t=!0;const r=setInterval((()=>{i--,$(`${o} #email-otp-timer`).text(`(${i})`),i<=0&&(clearInterval(r),e=!0,t=!1,$(`${o} #email-otp-timer`).css("display","none"),$(`${o} #resend-email-otp a`).css("opacity","1"),$(`${o} #resend-email-otp a`).css("cursor","pointer"))}),1e3)}function h(e){if(i)return;var t=300;$(`${o} #phone-otp-timer`).css("display","inline"),$(`${o} #resend-phone-otp a`).css("opacity","0.6"),$(`${o} #resend-phone-otp a`).css("cursor","not-allowed"),n=!1,i=!0;const r=setInterval((()=>{t--,$(`${o} #phone-otp-timer`).text(`(${function(e){let n=~~(e/3600),t=~~(e%3600/60),i=~~e%60,o="";return n>0&&(o+=n+":"+(t<10?"0":"")),o+=t+":"+(i<10?"0":""),o+=""+i,o}(t)})`),t<=0&&(clearInterval(r),n=!0,i=!1,$(`${o} #phone-otp-timer`).css("display","none"),$(`${o} #resend-phone-otp a`).css("opacity","1"),$(`${o} #resend-phone-otp a`).css("cursor","pointer"))}),1e3)}function f(){s?($(".login-channel-transfer__popup .popup-confirm-content").css("visibility","hidden"),$(".login-channel-transfer__popup .popup-confirm-footer").css("visibility","hidden"),$(".login-channel-transfer__popup .popup-confirm-loading").css("display","flex")):($(".login-channel-transfer__popup .popup-confirm-loading").css("display","none"),$(".login-channel-transfer__popup .popup-confirm-content").css("visibility","visible"),$(".login-channel-transfer__popup .popup-confirm-footer").css("visibility","visible"))}function g(){const t=$(`${o} #phone-otp-input`).val()||"",i=$(`${o} #email-otp-input`).val()||"",r=$(`${o} #recaptcha-input`).val()||"",u=$(`${o} #game-account-id`).val()||"",h=$(`${o} #game-social-id`).val()||"",g=$(`${o} #game-login-type`).val()||"",m=$(`${o} #game-id`).val()||"",v=$(`${o} #game-login-transfer-token`).val()||"";let y=!0;if(t||(d("phone","error","Vui lòng nhập OTP đã nhận."),n=!0,y=!1),i||(d("email","error","Vui lòng nhập OTP đã nhận."),e=!0,y=!1),r||($(`${o} .recaptcha .input-error`).css("display","flex"),y=!1),!y)return;s=!0,f();p("https://id.zing.vn/v2/infosetting/gamelogins/transfer/api/submit",{emailOtp:l(i),smsOtp:l(t),captchaText:l(r),captchaToken:a,token:v,gameAccountId:u,gameSocialId:h,gameLoginType:g,gameID:m}).then((t=>{if(s=!1,f(),c(),t.code>=0)return $(".login-channel-transfer__popup .popup-confirm-content .login-transfer-result").css("display","block"),$(".login-channel-transfer__popup .popup-confirm-content .login-transfer-confirmation").css("display","none"),$(".login-channel-transfer__popup .btn-cancel").css("display","none"),$(".login-channel-transfer__popup .btn-confirm").css("display","none"),void $(".login-channel-transfer__popup .btn-confirm-success").css("display","inline-block");if($(".login-channel-transfer__popup").css("display","none"),-21===t.code)return $(`${o} .recaptcha .input-error`).css("display","flex"),void $(`${o} .recaptcha .input-error .err-message`).text(t.msg||"Catpcha không chính xác");if(-22===t.code)return d("phone","error",t.msg||"SMS OTP không hợp lệ"),void(n=!0);if(-23===t.code)return d("email","error",t.msg||"Email OTP không hợp lệ"),void(e=!0);if($("#login-transfer-error").css("display","block"),-100!==t.code)if(-24!==t.code)if(-25!==t.code){if(-26!==t.code)return-30===t.code?($(`${o} #phone-otp-input`).val(""),$(`${o} #email-otp-input`).val(""),void $("#login-transfer-error .ptext").html('<div class="ptext">Thực hiện chuyển đổi đăng nhập không thành công. Bạn vui lòng <a href="/v2/infosetting/gamelogins?apikey=92140c0e46c54994812403f564787c14&amp;pid=38">Hủy bỏ</a> và thực hiện lại. Liên hệ hỗ trợ hoặc <a target="_blank" href="https://id.zing.vn/v2/guide-faq#g1_1">Xem hướng dẫn</a></div>')):void $("#login-transfer-error .ptext").text("Hệ thống có lỗi. Vui lòng quay lại sau");$("#login-transfer-error .ptext").text(t.msg||"Tài khoản Game có thông tin cá nhân không trùng khớp")}else $("#login-transfer-error .ptext").text(t.msg||"Tài khoản Zing ID đã được sử dùng cho đăng nhập game");else $("#login-transfer-error .ptext").text(t.msg||"Tài khoản Zing ID chưa khai báo đầy đủ thông tin");else $("#login-transfer-error .ptext").text(t.msg||"Hệ thống có lỗi. Vui lòng quay lại sau")})).catch((e=>{s=!1,f(),$(".login-channel-transfer__popup").css("display","none"),c()}))}$(".login-channel-transfer__game-select").select2({width:"resolve",placeholder:{id:"-1",text:"Chọn game muốn chuyển đổi"}}),$("#login-channel-transfer__history-table").DataTable({responsive:!0,searching:!1,pageLength:5,pagingType:"numbers",lengthChange:!1,order:[],columns:[{responsivePriority:1},{responsivePriority:2},{responsivePriority:5},{responsivePriority:4},{responsivePriority:3},{responsivePriority:6}],language:{paginate:{previous:"Lùi lại",next:"Kế tiếp"},info:"",infoEmpty:"",emptyTable:"Chưa có thay đổi nào."}}),$(".login-channel-transfer__wrapper #confirm_code_value_id").inputFilter((function(e){return/^\d*$/.test(e)})),c(),$(`${o} #captcha-refresh`).click((function(e){c()})),$(`${o} #send-email-otp`).click((function(n){n.preventDefault(),$(`${o} #send-email-otp`).css("display","none");p("https://id.zing.vn/v2/infosetting/gamelogins/transfer/api/sendEmailOtp",{type:"email",token:$(`${o} #game-login-transfer-token`).val()||""}).then((n=>{n.code>=0?(d("email"),u()):(d("email","error",n.msg),e=!0)})).catch((n=>{d("email","error"),e=!0}))})),$(`${o} #send-phone-otp`).click((function(e){e.preventDefault(),$(`${o} #send-phone-otp`).css("display","none");p("https://id.zing.vn/v2/infosetting/gamelogins/transfer/api/sendSmsOtp",{type:"phone",token:$(`${o} #game-login-transfer-token`).val()||""}).then((e=>{e.code>=0?(d("phone"),h()):(d("phone","error",e.msg,e.code),n=!0)})).catch((e=>{d("phone","error"),n=!0}))})),$(`${o} #resend-email-otp`).click((function(n){if(n.preventDefault(),!e)return;if(t)return;p("https://id.zing.vn/v2/infosetting/gamelogins/transfer/api/sendEmailOtp",{type:"email",token:$(`${o} #game-login-transfer-token`).val()||""}).then((n=>{n.code>=0?(d("email"),u()):(d("email","error",n.msg),e=!0)})).catch((n=>{d("email","error"),e=!0}))})),$(`${o} #resend-phone-otp`).click((function(e){if(e.preventDefault(),!n)return;if(i)return;p("https://id.zing.vn/v2/infosetting/gamelogins/transfer/api/sendSmsOtp",{type:"phone",token:$(`${o} #game-login-transfer-token`).val()||""}).then((e=>{e.code>=0?(d("phone"),h()):(d("phone","error",e.msg,e.code),n=!0)})).catch((e=>{d("phone","error"),n=!0}))})),$(`${o} #submit-otp-btn`).click((function(t){t.preventDefault(),$(`${o} .recaptcha .input-error`).css("display","none"),$(`${o} #email-otp-sent-failed`).css("display","none"),$(`${o} #phone-otp-sent-failed`).css("display","none");const i=$(`${o} #phone-otp-input`).val()||"",r=$(`${o} #email-otp-input`).val()||"",a=$(`${o} #recaptcha-input`).val()||"";let s=!0;i||(d("phone","error","Vui lòng nhập OTP đã nhận."),n=!0,s=!1),r||(d("email","error","Vui lòng nhập OTP đã nhận."),e=!0,s=!1),a||($(`${o} .recaptcha .input-error`).css("display","flex"),s=!1),s&&$(".login-channel-transfer__popup").css("display","block")})),$(".login-channel-transfer__popup .btn-confirm").click((function(e){e.preventDefault(),g()})),$(".login-channel-transfer__popup .btn-cancel").click((function(e){e.preventDefault(),$(".login-channel-transfer__popup").css("display","none")})),$(".login-channel-transfer__popup .btn-confirm-success").click((function(e){e.preventDefault(),window.location.href="https://id.zing.vn/v2/infosetting/gamelogins"}))}));
